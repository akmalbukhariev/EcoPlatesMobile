<?xml version="1.0" encoding="utf-8" ?>
<page:BasePage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               x:Class="EcoPlatesMobile.Views.Company.Pages.CompanyEditProductPage"
               xmlns:page="clr-namespace:EcoPlatesMobile.Views"
               xmlns:component="clr-namespace:EcoPlatesMobile.Views.Components">

    <Grid RowDefinitions="Auto, *">
        <component:CustomHeader Title="E'lonni yangilash"
                                HeaderBackground="#8338EC"/>
        <ScrollView Grid.Row="1">
            <Grid RowDefinitions="Auto, *, Auto">
                <Grid RowDefinitions="Auto, Auto">
                    <Image x:Name="imSelectedProduct"
                           Source="add_item.png"
                           HeightRequest="250"
                           Aspect="AspectFill">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer NumberOfTapsRequired="1"
                                                  Tapped="ProductImage_Tapped"/>    
                        </Image.GestureRecognizers>
                    </Image>
                    <Button Text="Set New Photo"
                            TextColor="#8338EC"
                            FontSize="17"
                            FontAttributes="Bold"
                            BackgroundColor="Transparent"
                            HorizontalOptions="Center"
                            Clicked="ChangeImage_Clicked"
                            Grid.Row="1"/>
                </Grid>
                <VerticalStackLayout Margin="16,20,16,10"
                                     Spacing="15"
                                     Grid.Row="1">
                        <VerticalStackLayout.Resources>
                            <Style x:Key="styleEntry" TargetType="component:CustomEntry">
                                <Setter Property="EntryBorderColor" Value="#E9E9E9"/>
                                <Setter Property="EntryBackgroundColor" Value="#F5F5F5"/>
                            </Style>
                            <Style x:Key="styleBorder" TargetType="Border">
                                <Setter Property="StrokeThickness" Value="1"/>
                                <Setter Property="Stroke" Value="#E9E9E9"/>
                                <Setter Property="BackgroundColor" Value="#F5F5F5"/>
                            </Style>
                            <Style x:Key="styleLabel" TargetType="Label">
                                <Setter Property="TextColor" Value="#666666"/>
                                <Setter Property="FontSize" Value="14"/>
                            </Style>
                            <Style x:Key="CustomPickerStyle" TargetType="Picker">
                                <Setter Property="BackgroundColor" Value="White"/>
                                <Setter Property="TextColor" Value="Black"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="Margin" Value="10,5"/>
                            </Style>
                        </VerticalStackLayout.Resources> 
                        <component:CustomEntry x:Name="entryProductName" 
                                            EntryIcon="item_name.png"
                                            EntryPlaceHolder="Maxsulot nomi"
                                            EntryPlaceHolderColor="LightGray"
                                            Grid.Row="1"/>
                        <component:CustomEntry x:Name="entryProductCount"
                                            EntryIcon="item_count.png"
                                            EntryPlaceHolder="Maxsulot soni"
                                            EntryKeyboard="Numeric"
                                            IsVisible="Collapse"
                                            EntryPlaceHolderColor="LightGray"
                                            Grid.Row="2"/>
                        <component:CustomEntry EntryIcon="item_date.png"
                                            IsVisible="Collapse"
                                            EntryPlaceHolder="Maxsulotning yaroqlilik muddati"
                                            EntryPlaceHolderColor="LightGray"
                                            Grid.Row="3"/>
                        <Border Style="{StaticResource styleBorder}"
                                HeightRequest="100"
                                Grid.Row="4">   
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10"/>
                        </Border.StrokeShape>
                        <StackLayout VerticalOptions="Center"
                                    Spacing="0">
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                Margin="20,0,20,5"
                                VerticalOptions="Center">
                                <Image Source="dollar.png"
                                        WidthRequest="20"
                                        HeightRequest="20"
                                        Margin="0,0, 10,0"
                                        VerticalOptions="Center"/>
                                <Entry x:Name="entryOldPrice"
                                       Keyboard="Numeric"
                                       Text="000"
                                       FontSize="16"
                                       Grid.Column="1"/>
                                <Label x:Name="lbOldPrice"
                                    Text="so'm Avvalgi narxi"
                                    Style="{StaticResource styleLabel}"
                                    VerticalTextAlignment="Center"
                                    Margin="0,0,10,0"
                                    Grid.Column="3"/>
                            </Grid>
                            <Border BackgroundColor="#E9E9E9" 
                                    HeightRequest="2"
                                    Margin="10,0,10,0"
                                    Grid.Row="1"/>
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                  Margin="20,5,20,0">
                                <Image Source="percent.png"
                                    WidthRequest="20"
                                    HeightRequest="20"
                                    Margin="0,0, 10,0"
                                    VerticalOptions="Center"/>
                                <Entry x:Name="entryNewPrice"
                                       Text="000"
                                       Keyboard="Numeric"
                                       FontSize="16"
                                       Grid.Column="1"/>
                                <Label x:Name="lbNewPrice" 
                                    Text="so'm Hozirgi narxi"
                                    Style="{StaticResource styleLabel}"
                                    VerticalTextAlignment="Center"
                                    Margin="0,0,10,0"
                                    Grid.Column="2"/>
                            </Grid>
                        </StackLayout>
                    </Border>
                    <Border Style="{StaticResource styleBorder}"
                            HeightRequest="200">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Editor x:Name="editorDescription"
                                    Placeholder="Enter description about the product"
                                    FontSize="16"/>
                    </Border>
                </VerticalStackLayout>
                <Button x:Name="btnUpdate"
                        Text="Update"
                        BackgroundColor="#8338EC"
                        CornerRadius="30"
                        TextColor="White"
                        FontFamily="Roboto"
                        HeightRequest="50"
                        Margin="16,0,16,30"
                        Clicked="BtnUpdate_Clicked"
                        Grid.Row="2"/>  
            </Grid>
        </ScrollView>
        <ActivityIndicator x:Name="IsLoading"
                           Color="Green"
                           Scale="1.5"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"
                           Grid.RowSpan="2"/>
        <BoxView x:Name="boxFullImage"
                BackgroundColor="Black"
                IsVisible="False"
                Opacity="0.7"
                Grid.RowSpan="2"/>
        <Image x:Name="fullImage"
               Aspect="AspectFit"
               IsVisible="False"
               Grid.RowSpan="2">
            <Image.GestureRecognizers>
                <SwipeGestureRecognizer Direction="Up"
                                        Swiped="OnImage_Swiped"/>
                <TapGestureRecognizer NumberOfTapsRequired="1"
                                      Tapped="OnImage_Tapped"/>
            </Image.GestureRecognizers>
        </Image>
    </Grid>
</page:BasePage>