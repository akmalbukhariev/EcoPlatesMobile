<?xml version="1.0" encoding="utf-8" ?>
<page:BasePage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               x:Class="EcoPlatesMobile.Views.Company.Pages.CompanyEditProductPage"
               xmlns:page="clr-namespace:EcoPlatesMobile.Views"
               xmlns:language="clr-namespace:EcoPlatesMobile.Resources.Languages"
               xmlns:component="clr-namespace:EcoPlatesMobile.Views.Components"
               xmlns:behaviors="clr-namespace:EcoPlatesMobile.Helper"
               BackgroundColor="White">

    <Grid RowDefinitions="Auto, *">
        <component:CustomHeader Title="{x:Static language:AppResource.UpdateProduct}"
                                HeaderBackground="{StaticResource Company}"/>
        <Image Source="done.png"
               WidthRequest="30"
               HeightRequest="30"
               Margin="0,0,15,0"
               VerticalOptions="Center"
               HorizontalOptions="End">
               <Image.GestureRecognizers>
                    <TapGestureRecognizer NumberOfTapsRequired="1"
                                          Tapped="Done_Tapped"/>
               </Image.GestureRecognizers>
        </Image>
        <ScrollView Grid.Row="1">
            <Grid RowDefinitions="Auto, *, Auto">
                <Grid RowDefinitions="Auto, Auto">
                    <Image x:Name="imSelectedProduct"
                           Source="add_item.png"
                           HeightRequest="250"
                           Aspect="AspectFill">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer NumberOfTapsRequired="1"
                                                  Tapped="ProductImage_Tapped"/>    
                        </Image.GestureRecognizers>
                    </Image>
                    <Button Text="{x:Static language:AppResource.SetNewPhoto}"
                            TextColor="{StaticResource Company}"
                            FontSize="17"
                            FontFamily="RobotoVar"
                            FontAttributes="Bold"
                            BackgroundColor="Transparent"
                            HorizontalOptions="Center"
                            Clicked="ChangeImage_Clicked"
                            Grid.Row="1"/>
                </Grid>
                <VerticalStackLayout Margin="16,20,16,10"
                                     Spacing="15"
                                     Grid.Row="1">
                        <VerticalStackLayout.Resources>
                            <Style x:Key="styleEntry" TargetType="component:CustomEntry">
                                <Setter Property="EntryBorderColor" Value="#E9E9E9"/>
                                <Setter Property="EntryBackgroundColor" Value="#F5F5F5"/>
                            </Style>
                            <Style x:Key="styleBorder" TargetType="Border">
                                <Setter Property="StrokeThickness" Value="1"/>
                                <Setter Property="Stroke" Value="#E9E9E9"/>
                                <Setter Property="BackgroundColor" Value="#F5F5F5"/>
                            </Style>
                            <Style x:Key="styleLabel" TargetType="Label">
                                <Setter Property="TextColor" Value="#666666"/>
                                <Setter Property="FontSize" Value="14"/>
                            </Style>
                            <Style x:Key="CustomPickerStyle" TargetType="Picker">
                                <Setter Property="BackgroundColor" Value="White"/>
                                <Setter Property="TextColor" Value="Black"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="FontFamily" Value="RobotoVar"/>
                                <Setter Property="Margin" Value="10,5"/>
                            </Style>
                        </VerticalStackLayout.Resources> 
                        <component:CustomEntry x:Name="entryProductName" 
                                               EntryIcon="item_name.png"
                                               EntryPlaceHolder="{x:Static language:AppResource.ProductName}"
                                               EntryPlaceHolderColor="LightGray"
                                               Grid.Row="1"/>
                        <component:CustomEntry x:Name="entryProductCount"
                                               EntryIcon="item_count.png"
                                               EntryPlaceHolder="{x:Static language:AppResource.ProductQuantity}"
                                               EntryKeyboard="Numeric"
                                               IsVisible="Collapse"
                                               EntryPlaceHolderColor="LightGray"
                                               Grid.Row="2"/>
                        <component:CustomEntry EntryIcon="item_date.png"
                                               IsVisible="Collapse"
                                               EntryPlaceHolder="Maxsulotning yaroqlilik muddati"
                                               EntryPlaceHolderColor="LightGray"
                                               Grid.Row="3"/>
                        <Border Style="{StaticResource styleBorder}"
                                HeightRequest="100"
                                Grid.Row="4">   
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10"/>
                        </Border.StrokeShape>
                        <StackLayout VerticalOptions="Center"
                                    Spacing="0">
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                  Margin="20,0,20,5"
                                  VerticalOptions="Center">
                                <Image Source="dollar.png"
                                        WidthRequest="20"
                                        HeightRequest="20"
                                        Margin="0,0, 10,0"
                                        VerticalOptions="Center"/>
                                <Entry x:Name="entryOldPrice"
                                       Keyboard="Numeric"
                                       Text="000"
                                       TextColor="Black"
                                       FontSize="16"
                                       FontFamily="RobotoVar"
                                       TextChanged="PriceTextChanged"
                                       Grid.Column="1">
                                    <Entry.Behaviors>
                                        <behaviors:DoneKeyboardBehavior />
                                    </Entry.Behaviors>
                                </Entry>
                                <Label x:Name="lbOldPrice"
                                       Text="{x:Static language:AppResource.PreviousPrice}"
                                       Style="{StaticResource styleLabel}"
                                       FontFamily="RobotoVar"
                                       VerticalTextAlignment="Center"
                                       Margin="0,0,10,0"
                                       Grid.Column="3"/>
                            </Grid>
                            <Border BackgroundColor="#E9E9E9" 
                                    HeightRequest="2"
                                    Margin="10,0,10,0"
                                    Grid.Row="1"/>
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                  Margin="20,5,20,0">
                                <Image Source="percent.png"
                                       WidthRequest="20"
                                       HeightRequest="20"
                                       Margin="0,0, 10,0"
                                       VerticalOptions="Center"/>
                                <Entry x:Name="entryNewPrice"
                                       Text="000"
                                       TextColor="Black"
                                       Keyboard="Numeric"
                                       FontSize="16"
                                       FontFamily="RobotoVar"
                                       TextChanged="PriceTextChanged"
                                       Grid.Column="1">
                                    <Entry.Behaviors>
                                        <behaviors:DoneKeyboardBehavior />
                                    </Entry.Behaviors>
                                </Entry>
                                <Label x:Name="lbNewPrice" 
                                       Text="{x:Static language:AppResource.CurrentPrice}"
                                       Style="{StaticResource styleLabel}"
                                       FontFamily="RobotoVar"
                                       FontAttributes="Bold"
                                       VerticalTextAlignment="Center"
                                       Margin="0,0,10,0"
                                       Grid.Column="2"/>
                            </Grid>
                        </StackLayout>
                    </Border>
                    <Border Style="{StaticResource styleBorder}"
                            HeightRequest="150">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Editor x:Name="editorDescription"
                                    Placeholder="{x:Static language:AppResource.ProductDescription}"
                                    TextColor="Black"
                                    FontFamily="RobotoVar"
                                    FontSize="16"/>
                    </Border>
                </VerticalStackLayout>
                <Grid x:Name="grdBottom" 
                      ColumnDefinitions="*, *"
                      Margin="16,0,16,30"
                      HeightRequest="50"
                      ColumnSpacing="10"
                      Grid.Row="2">
                    <Button x:Name="btnActive"
                            Text="{x:Static language:AppResource.Active}"
                            Style="{StaticResource StyleBigButton}"
                            TextColor="White"
                            BackgroundColor="{StaticResource User}"
                            CornerRadius="4"
                            Clicked="BtnActive_Clicked"/>  
                    <Button x:Name="btnDelete"
                            Text="{x:Static language:AppResource.Delete}"
                            Style="{StaticResource StyleBigButton}"
                            TextColor="White"
                            BackgroundColor="Red"
                            CornerRadius="4"
                            Clicked="BtnDelete_Clicked"
                            Grid.Column="1"/>
                </Grid>
                <Button x:Name="btnInactive"
                        Style="{StaticResource StyleBigButton}"
                        Text="{x:Static language:AppResource.Inactive}"
                        TextColor="Red"
                        BackgroundColor="#FFF0F0"
                        BorderColor="Red"
                        Margin="16,0,16,30"
                        BorderWidth="1"
                        HeightRequest="50"
                        CornerRadius="4"
                        Clicked="BtnInActive_Clicked"
                        Grid.Row="2"/>  
            </Grid>
        </ScrollView>
        <ActivityIndicator x:Name="IsLoading"
                           Color="{StaticResource Company}"
                           Scale="1.5"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"
                           Grid.RowSpan="2"/>
        <BoxView x:Name="boxFullImage"
                BackgroundColor="Black"
                IsVisible="True"
                Opacity="0"
                InputTransparent="True"
                Grid.RowSpan="2"/>
        <Image x:Name="fullImage"
               Aspect="AspectFit"
               IsVisible="False"
               Grid.RowSpan="2">
            <Image.GestureRecognizers>
                <SwipeGestureRecognizer Direction="Up"
                                        Swiped="OnImage_Swiped"/>
                <SwipeGestureRecognizer Direction="Down"
                                        Swiped="OnImage_Swiped"/>
                <TapGestureRecognizer NumberOfTapsRequired="1"
                                      Tapped="OnImage_Tapped"/>
            </Image.GestureRecognizers>
        </Image>
    </Grid>
</page:BasePage>