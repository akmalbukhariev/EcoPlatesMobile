<?xml version="1.0" encoding="utf-8" ?>
<page:BasePage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               x:Class="EcoPlatesMobile.Views.Company.Pages.CompanyAddProductPage"
               xmlns:page="clr-namespace:EcoPlatesMobile.Views"
               xmlns:language="clr-namespace:EcoPlatesMobile.Resources.Languages"
               xmlns:component="clr-namespace:EcoPlatesMobile.Views.Components"
               xmlns:behaviors="clr-namespace:EcoPlatesMobile.Helper"
               BackgroundColor="White">

    <Grid RowDefinitions="Auto, *">
        <component:CustomHeader Title="{x:Static language:AppResource.NewProduct}"
                                HeaderBackground="{StaticResource Company}"/>
        <ScrollView Grid.Row="1">
            <Grid RowDefinitions="Auto, *, Auto">
                <Image x:Name="imSelectedProduct"
                        IsVisible="Collapse"
                        HeightRequest="250"
                        Source="add_item.png"
                        Aspect="AspectFill">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer NumberOfTapsRequired="1"
                                              Tapped="SelectImage_Tapped"/>
                    </Image.GestureRecognizers>
                </Image>
                <VerticalStackLayout Margin="16,20,16,10"
                                     Spacing="15"
                                     Grid.Row="1">
                    <VerticalStackLayout.Resources>
                        <Style x:Key="styleEntry" TargetType="component:CustomEntry">
                            <Setter Property="EntryBorderColor" Value="#E9E9E9"/>
                            <Setter Property="EntryBackgroundColor" Value="#F5F5F5"/>
                        </Style>
                        <Style x:Key="styleBorder" TargetType="Border">
                            <Setter Property="StrokeThickness" Value="1"/>
                            <Setter Property="Stroke" Value="#E9E9E9"/>
                            <Setter Property="BackgroundColor" Value="#F5F5F5"/>
                        </Style>
                        <Style x:Key="styleLabel" TargetType="Label">
                            <Setter Property="TextColor" Value="#666666"/>
                            <Setter Property="FontSize" Value="14"/>
                        </Style>
                        <Style x:Key="CustomPickerStyle" TargetType="Picker">
                            <Setter Property="BackgroundColor" Value="White"/>
                            <Setter Property="TextColor" Value="Black"/>
                            <Setter Property="FontSize" Value="16"/>
                            <Setter Property="Margin" Value="10,5"/>
                        </Style>
                    </VerticalStackLayout.Resources>
                        <Border x:Name="borderProductIcon"
                                Style="{StaticResource styleBorder}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer NumberOfTapsRequired="1"
                                                    Tapped="SelectImage_Tapped"/>
                            </Border.GestureRecognizers>
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="*, Auto">
                                <Label Text="{x:Static language:AppResource.ProductImages}"
                                       TextColor="#666666"
                                       FontSize="14"
                                       FontFamily="RobotoVar"
                                       VerticalTextAlignment="Center"
                                       Margin="20, 0, 0, 0"/>   
                                <Image x:Name="imProductIcon"
                                       Source="add_item.png"
                                       Aspect="AspectFill"
                                       HeightRequest="45"
                                       HorizontalOptions="End"
                                       Margin="0,10,15,10"/>
                            </Grid>
                        </Border>
                        <component:CustomEntry x:Name="entryProductName" 
                                               EntryIcon="item_name.png"
                                               EntryPlaceHolder="{x:Static language:AppResource.ProductName}"
                                               EntryPlaceHolderColor="Gray"
                                               Grid.Row="1"/>
                        <component:CustomEntry x:Name="entryProductCount"
                                               EntryIcon="item_count.png"
                                               EntryPlaceHolder="{x:Static language:AppResource.ProductQuantity}"
                                               EntryKeyboard="Numeric"
                                               IsVisible="Collapse"
                                               EntryPlaceHolderColor="LightGray"
                                               Grid.Row="2"/>
                        <component:CustomEntry EntryIcon="item_date.png"
                                               IsVisible="Collapse"
                                               EntryPlaceHolder="Maxsulotning yaroqlilik muddati"
                                               EntryPlaceHolderColor="LightGray"
                                               Grid.Row="3"/>
                        <Border Style="{StaticResource styleBorder}"
                                HeightRequest="100"
                                Grid.Row="4">   
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10"/>
                        </Border.StrokeShape>
                        <StackLayout VerticalOptions="Center"
                                     Spacing="0">
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                  Margin="20,0,20,5"
                                  VerticalOptions="Center">
                                <Image Source="dollar.png"
                                       WidthRequest="20"
                                       HeightRequest="20"
                                       Margin="0,0, 10,0"
                                       VerticalOptions="Center"/>
                                <Entry x:Name="entryOldPrice"
                                       Keyboard="Numeric"
                                       FontSize="16"
                                       FontFamily="RobotoVar"
                                       TextColor="Black"
                                       TextChanged="PriceTextChanged"
                                       Grid.Column="1">
                                </Entry>
                                <Label x:Name="lbOldPrice"
                                        Text="{x:Static language:AppResource.PreviousPrice}"
                                        Style="{StaticResource styleLabel}"
                                        FontFamily="RobotoVar"
                                        VerticalTextAlignment="Center"
                                        Margin="0,0,10,0"
                                        Grid.Column="3"/>
                            </Grid>
                            <Border BackgroundColor="#E9E9E9" 
                                    HeightRequest="2"
                                    Margin="10,0,10,0"
                                    Grid.Row="1"/>
                            <Grid ColumnDefinitions="Auto, *, Auto"
                                  Margin="20,5,20,0">
                                <Image Source="percent.png"
                                       WidthRequest="20"
                                       HeightRequest="20"
                                       Margin="0,0, 10,0"
                                       VerticalOptions="Center"/>
                                <Entry x:Name="entryNewPrice"
                                       Keyboard="Numeric"
                                       FontSize="16"
                                       FontFamily="RobotoVar"
                                       TextColor="Black"
                                       TextChanged="PriceTextChanged"
                                       Grid.Column="1"/>
                                <Label x:Name="lbNewPrice" 
                                       Text="{x:Static language:AppResource.CurrentPrice}"
                                       Style="{StaticResource styleLabel}"
                                       FontAttributes="Bold"
                                       FontFamily="RobotoVar"
                                       VerticalTextAlignment="Center"
                                       Margin="0,0,10,0"
                                       Grid.Column="2"/>
                            </Grid>
                        </StackLayout>
                        </Border>
                        <Border Style="{StaticResource styleBorder}"
                                HeightRequest="200">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Editor x:Name="editorDescription"
                                    Placeholder="{x:Static language:AppResource.ProductDescription}"
                                    TextColor="Black"
                                    FontFamily="RobotoVar"
                                    Margin="5"
                                    FontSize="16"/>
                        </Border>
                </VerticalStackLayout>
                <Button x:Name="btnRegister"
                        Text="{x:Static language:AppResource.Add}"
                        BackgroundColor="{StaticResource Company}"
                        CornerRadius="30"
                        Style="{StaticResource StyleBigButton}"
                        HeightRequest="50"
                        Margin="16,0,16,30"
                        Clicked="Register_Clicked"
                        Grid.Row="2"/>  
            </Grid>
        </ScrollView>
        <ActivityIndicator x:Name="IsLoading"
                           Color="{StaticResource Company}"
                           Scale="1.5"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"
                           Grid.RowSpan="2"/>
    </Grid>
</page:BasePage>