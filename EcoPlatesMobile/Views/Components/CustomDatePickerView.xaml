<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EcoPlatesMobile.Views.Components.CustomDatePickerView"
             x:Name="Root"
             BackgroundColor="Transparent"
             IsVisible="False">

    <Grid>
        <!-- Overlay to close the picker -->
        <BoxView BackgroundColor="Black" Opacity="0.5">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Bottom Sheet Picker -->
        <Grid VerticalOptions="End" Padding="0,0,0,20" HeightRequest="350">
            <Frame CornerRadius="20"
                   BackgroundColor="White"
                   Padding="20"
                   HasShadow="True"
                   VerticalOptions="End"
                   TranslationY="300"
                   x:Name="PickerFrame">

                <Grid RowDefinitions="Auto,*,Auto" ColumnDefinitions="*">
                    <!-- Title -->
                    <Label Text="Sanani tanlang"
                           FontSize="20"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"
                           TextColor="Black"
                           Grid.Row="0"
                           Margin="0,0,0,10"/>

                    <!-- Selection Highlight -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="50" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="1"
                              BackgroundColor="Transparent"
                              Padding="0"
                              Margin="0"
                              VerticalOptions="Center">
                            <BoxView HeightRequest="2" Color="{StaticResource User}" VerticalOptions="Start"/>
                            <BoxView HeightRequest="2" Color="{StaticResource User}" VerticalOptions="End"/>
                        </Grid>

                        <!-- Date-Time Pickers -->
                        <Grid Grid.RowSpan="3" ColumnDefinitions="*,*,*">
                            <!-- Date Picker -->
                            <CollectionView x:Name="DateList"
                                            SelectionMode="Single"
                                            HeightRequest="200"
                                            VerticalScrollBarVisibility="Never">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Label Text="{Binding}"
                                               FontSize="20"
                                               HorizontalOptions="Center"
                                               VerticalOptions="Center"
                                               TextColor="Black"/>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>

                            <!-- Hour Picker -->
                            <CollectionView x:Name="HourList"
                                            Grid.Column="1"
                                            SelectionMode="Single"
                                            HeightRequest="200"
                                            VerticalScrollBarVisibility="Never">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Label Text="{Binding}"
                                               FontSize="20"
                                               HorizontalOptions="Center"
                                               VerticalOptions="Center"
                                               TextColor="Black"/>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>

                            <!-- Minute Picker -->
                            <CollectionView x:Name="MinuteList"
                                            Grid.Column="2"
                                            SelectionMode="Single"
                                            HeightRequest="200"
                                            VerticalScrollBarVisibility="Never">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Label Text="{Binding}"
                                               FontSize="20"
                                               HorizontalOptions="Center"
                                               VerticalOptions="Center"
                                               TextColor="Black"/>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </Grid>
                    </Grid>

                    <!-- Confirm Button -->
                    <Button Grid.Row="2"
                            Text="Tasdiqlash"
                            BackgroundColor="LimeGreen"
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            Clicked="OnConfirmClicked"
                            Margin="0,20,0,0"/>
                </Grid>
            </Frame>
        </Grid>
    </Grid>
</ContentView>